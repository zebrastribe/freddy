<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Freddy: Where are you?</title>
  <!-- Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <!-- Main CSS -->
  <link rel="stylesheet" href="css/main.css">
  <!-- Favicon -->
  <link rel="icon" href="img/favicon.ico">
  <!-- Google Maps JavaScript API -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBd3xQgm7vnL2LCmxpabVT5qAhSFOteuGY&callback=initMap" async defer></script>
</head>
<body onload="initMap()">
  <div class="container mx-auto p-4">
    <div id="content"></div>
    <div id="root" class="flex flex-col items-center my-4 min-h-screen">
      <h1 class="text-3xl font-bold mb-4">Wow you met Freddy! üêà</h1>
      <p class="mb-4 text-lg text-gray-700 text-center max-w-lg">
        ... the friendly and adventurous ginger cat with a heart as fiery as his fur! Freddy isn't your average feline ‚Äî he's always on the move, exploring new places and turning every corner into his personal playground.
      </p>
      <p class="mb-4 text-lg text-gray-900 font-black text-center max-w-lg">
        Feeling adventurous too? Don't forget to use the check-in function on this page to keep up with Freddy's latest exploits and join in on the fun!
      </p>
      
      <!-- Tabs -->
      <div class="w-full max-w-lg">
        <div class="flex border-b border-gray-200">
          <button id="checkInTab" class="flex-1 py-2 px-4 text-center text-blue-600 border-b-2 border-blue-600">Check In</button>
          <button id="recordedCheckInsTab" class="flex-1 py-2 px-4 text-center text-gray-600 border-b-2 border-gray-200">Recorded Check-Ins</button>
        </div>
      </div>
      
      <!-- Check In Content -->
      <div id="checkInContent" class="tab-content w-full max-w-5xl my-5">
        <p class="text-gray-700 text-base mb-4 my-4">
          Here you can check Freddy in. Which means that you have met Freddy and are okay with giving the coordinates to me and the rest of the world ‚Äì Only GPS coordinates and the name will be stored.  
        </p>
        <input type="text" id="nameInput" placeholder="Your name?" class="mb-4 p-2 border border-gray-300 rounded w-full required">
        <div id="error-message" class="hidden text-red-500 mb-4">Well, you could make one up ‚Äì I guess?</div>
        <button id="clickButton" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded w-full">
          Check Freddy in üê±!
        </button>
        <div id="spinner" class="hidden mt-4">Loading...</div>
        <div id="success-message" class="hidden text-green-500 mt-4">Check-in successful!</div>
        <div id="map" class="mt-5" style="height: 400px; width: 100%;"></div>
      </div>
      
      <!-- Recorded Check-Ins Content -->
      <div id="recordedCheckInsContent" class="tab-content hidden w-full max-w-5xl my-5">
        <div id="checkInsListContainer" class="mt-5 w-full">
          <p class="text-gray-700 text-base mb-4 my-4">
            All Freddy's check-ins. The places he has ventured.
          </p>
          <div id="recordedMap" class="mt-5 my-5" style="height: 400px; width: 100%;"></div>
          <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Latitude</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Longitude</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Time</th>
                </tr>
              </thead>
              <tbody id="checkInsList" class="bg-white divide-y divide-gray-200">
                <!-- Rows will be dynamically inserted here -->
              </tbody>
            </table>
          </div>
          <div class="flex justify-between mt-4">
            <button id="prevPage" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded">Previous</button>
            <button id="nextPage" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded">Next</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script type="module" src="js/app.js"></script>
  <script>
    function initMap() {
      window.map = new google.maps.Map(document.getElementById('map'), {
        center: { lat: 0, lng: 0 },
        zoom: 2
      });
    }
    window.initMap = initMap; // Expose initMap to the global scope

    // Tab switching logic
    document.getElementById('checkInTab').addEventListener('click', () => {
      document.getElementById('checkInContent').classList.remove('hidden');
      document.getElementById('recordedCheckInsContent').classList.add('hidden');
      document.getElementById('checkInTab').classList.add('text-blue-600', 'border-blue-600');
      document.getElementById('checkInTab').classList.remove('text-gray-600', 'border-gray-200');
      document.getElementById('recordedCheckInsTab').classList.add('text-gray-600', 'border-gray-200');
      document.getElementById('recordedCheckInsTab').classList.remove('text-blue-600', 'border-blue-600');
    });

    document.getElementById('recordedCheckInsTab').addEventListener('click', () => {
      document.getElementById('checkInContent').classList.add('hidden');
      document.getElementById('recordedCheckInsContent').classList.remove('hidden');
      document.getElementById('recordedCheckInsTab').classList.add('text-blue-600', 'border-blue-600');
      document.getElementById('recordedCheckInsTab').classList.remove('text-gray-600', 'border-gray-200');
      document.getElementById('checkInTab').classList.add('text-gray-600', 'border-gray-200');
      document.getElementById('checkInTab').classList.remove('text-blue-600', 'border-blue-600');
    });
  </script>
</body>
</html>
